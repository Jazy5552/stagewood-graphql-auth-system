# Migration `20200705194354-add-user-model`

This migration has been generated by Jazy Llerena at 7/5/2020, 7:43:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `stagewood-auth`.`User` (
`createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ,`email` varchar(191) NOT NULL  ,`id` int NOT NULL  AUTO_INCREMENT,`name` varchar(191) NOT NULL  ,`password` varchar(191) NOT NULL  ,`username` varchar(191) NOT NULL  ,
    PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `stagewood-auth`.`Link` ADD COLUMN `postedById` int  ;

CREATE UNIQUE INDEX `User.username` ON `stagewood-auth`.`User`(`username`)

CREATE UNIQUE INDEX `User.email` ON `stagewood-auth`.`User`(`email`)

ALTER TABLE `stagewood-auth`.`Link` ADD FOREIGN KEY (`postedById`) REFERENCES `stagewood-auth`.`User`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200703000751-init..20200705194354-add-user-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,15 +1,27 @@
 datasource db {
-  provider = "sqlite"
-  url = "***"
+  provider = "mysql"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model Link {
-  id Int @id @default(autoincrement())
+  id          Int      @id @default(autoincrement())
+  createdAt   DateTime @default(now())
+  description String
+  url         String
+  postedBy    User?    @relation(fields: [postedById], references: [id])
+  postedById  Int?
+}
+
+model User {
+  id        Int      @id @default(autoincrement())
+  name      String
+  username  String   @unique
+  email     String   @unique
+  password  String
+  links     Link[]
   createdAt DateTime @default(now())
-  description String
-  url String
-}
+}
```


